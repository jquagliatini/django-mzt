{% extends "core/base.html" %}
{% load i18n components %}
{% block content %}
  {% blocktranslate with sequence_name=sequence.name %}
    <h2 class="text-3xl font-thin capitalize">Update <span class="js-timerName normal-case">{{ sequence_name }}</span></h2>
  {% endblocktranslate %}
  <form method="post" class="mt-6 overflow-hidden">
    {% csrf_token %}
    <div class="flex flex-col gap-y-4">
      <div class="flex flex-col gap-y-1 w-64">
        <label for="{{ form.name.auto_id }}" class="capitalize">{% translate 'name' %}</label>
        {{ form.name.as_field_group }}
      </div>
      <div class="mt-2">{{ formset }}</div>
    </div>
    <button class="mt-6 truncate max-w-full {% cx 'button' %}">
      {% blocktranslate with sequence_name=sequence.name %}
        update <span class="js-timerName">{{ sequence_name }}</span>
      {% endblocktranslate %}
    </button>
  </form>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const timerNameInputId = '{{ form.name.auto_id }}';

      const $timerNameInput = document.getElementById(timerNameInputId);
      if (!$timerNameInput) return;

      /** @type {NodeListOf<HTMLSpanElement>} */
      const timerNames = document.querySelectorAll('.js-timerName');
      $timerNameInput.addEventListener('input', (event) => {
        const { value } = $timerNameInput;
        for (const timerName of timerNames) {
          timerName.innerText = value;
        }
      })
    })
  </script>
{% endblock content %}
